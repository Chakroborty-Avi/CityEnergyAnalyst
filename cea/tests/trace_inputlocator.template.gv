
{% if scripts|length > 1 %}
digraph trace_inputlocator {
    rankdir="LR";
    graph [overlap = false, fontname=arial];
    {% for script in scripts %}
    "{{script}}"[shape=note, style=filled, fillcolor=turquoise3, fontname=arial, fontsize=20];
    {% endfor %}

    node [shape=box, style=filled, fillcolor=azure2, fontname=arial, fontsize=15]
    {% for direction, script, locator, path, file in trace_data %}
        {% if loop.changed(direction, script, path) %}
            {% if direction == 'input' %}
    "{{path}}" -> "{{script}}"
            {% else %}
    "{{script}}" -> "{{path}}"
            {% endif %}
        {% endif %}
    {% endfor %}
}

{% else %}

digraph trace_inputlocator {
    rankdir="LR";

    graph [overlap=false, fontname=arial];
    {% for script in scripts %}
    "{{script}}"[style=filled, fillcolor=turquoise3, shape=note, fontsize=20, fontname=arial];
    {% endfor %}

    node [shape=box, style=filled, color=white, fontsize=15, fontname=arial, fixedsize=true, width={{width}}];
    edge [fontname=arial, fontsize = 15];

    {% for direction, script, locator, path, file in trace_data %}
        {% if direction == 'input' %}
    "{{file}}" -> "{{script}}"[label="{{locator}}"]
        {% else %}
    "{{script}}" -> "{{file}}"[label="{{locator}}"]
        {% endif %}
    {% endfor %}

    {% for db in range(0, db_group|length) %}
    subgraph cluster_{{db}} {
        style = filled;
        color = azure2;
        fontsize = 20;
        label="{{db_group[db]}}";
        {% for direction, script, locator, path, file in trace_data %}
        {% if path == db_group[db] %}
    "{{file}}"
        {% endif %}
        {% endfor %}
    }
    {% endfor %}
    }
{% endif %}