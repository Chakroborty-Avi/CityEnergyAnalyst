<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="{{ 'css/config_editor.css'|staticfile }}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
</head>
<body>

<script src="{{'js/jquery-3.2.1.min.js'|staticfile}}"></script>
<script src="{{'js/config_editor.js'|staticfile}}"></script>


<div id="wrapper">
<div id="section-list" class="list-group" role="tablist">
    {% for section in config.sections.values() %}
        <a class="list-group-item list-group-item-action" id="list-{{section.name}}-list" data-toggle="list"
           href="#list-{{section.name}}" role="tab" aria-controls="{{section.name}}">{{ section.name }}</a>
    {% endfor %}
</div>

<div id="section-editor" class="tab-content">
    {% for section in config.sections.values() %}
        <div class="tab-pane fade" id="list-{{section.name}}" role="tabpanel" aria-labelledby="list-{{section.name}}-list">
            <form action="backend.save_config" name="config_form" data-bind="true">
            <h2>{{section.name}}</h2>
        {% for parameter in section.parameters.values() %}
            <div class="form-group">
                {% if parameter.typename == "BooleanParameter" %}
                <label for="{{parameter.section.name}}-{{parameter.name}}">{{ parameter.name }}</label>
                {% else %}
                {% if parameter.typename == "BooleanParameter" %}
                <select id="{{parameter.section.name}}-{{parameter.name}}"
                        name="{{parameter.section.name}}:{{parameter.name}}" class="form-control">
                    <option {% if parameter.get() %}selected{% endif %}>true</option>
                    <option {% if not parameter.get() %}selected{% endif %}>false</option>
                </select>
                {% elif parameter.typename == "StringParameter" %}

                {% elif parameter.typename == "ChoiceParameter" %}
                <select id="{{parameter.section.name}}-{{parameter.name}}"
                        name="{{parameter.section.name}}:{{parameter.name}}" class="form-control">
                {% for choice in parameter._choices %}
                    <option {% if parameter.get() == choice %}selected{% endif %}>{{choice}}</option>
                {% endfor %}
                </select>

                {% elif parameter.typename == "MultiChoiceParameter" %}
                <select id="{{parameter.section.name}}-{{parameter.name}}"
                        name="{{parameter.section.name}}:{{parameter.name}}" class="form-control" multiple>
                {% for choice in parameter._choices %}
                    <option {% if choice in parameter.get() %}selected{% endif %}>{{choice}}</option>
                {% endfor %}
                </select>

                {% else %}

                <input id="{{parameter.section.name}}-{{parameter.name}}" class="form-control"
                   name="{{parameter.section.name}}:{{parameter.name}}" type="text"
                   value="{{parameter.encode(parameter.get())}}"
                   aria-describedby="{{parameter.section.name}}-{{parameter.name}}-help"/>
                {% endif %}
                {% endif %}
                <small id="{{parameter.section.name}}-{{parameter.name}}-help" class="form-text text-muted">{{parameter.help}}</small>
            </div>
        {% endfor %}
            <input type="submit" value="Save" class="btn btn-primary btn-lg btn-block"/>
            </form>
        </div>
    {% endfor %}

</div>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

</body>
</html>